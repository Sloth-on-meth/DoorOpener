Security hardening, performance optimization & code cleanup

Security fixes:
- S1: Use hmac.compare_digest() for timing-safe admin password comparison
- S2: XSS-escape all dynamic values in admin dashboard innerHTML injections
- S3: Replace non-deterministic hash() with hashlib.sha256 for client fingerprinting
- S4: Add periodic pruning of expired rate-limiter entries to prevent memory leaks
- S5: Make users_store._save_atomic() truly atomic via tempfile + os.replace()
- S6: Set X-XSS-Protection to 0 (modern best practice; CSP is the real protection)
- S9: Add per-client rate limiting on /battery endpoint

Performance optimizations:
- P1: Cache battery API calls with 60s TTL (returns stale on error)
- P2: Batch touch_user disk writes via pending touches buffer
- P3: Parse only tail of log file (last 500 entries) instead of full 1MB
- P4: Reduce gunicorn from 2 workers to 1 (halves memory for single-user app)
- P5: Replace defaultdict(lambda) with plain dict + .get() (less memory, no silent growth)
- P6: Limit requests.Session connection pool to 1 connection (only 1 HA host)
- P7: Add gzip response compression for text responses over 512 bytes
- P8: Add __slots__ to RateLimiter, HAClient, UsersStore classes

Code quality:
- Q1: Remove duplicate openClearAll/clearLogs functions in admin.html
- Q2: Remove per-request app.permanent_session_lifetime override (already set at init)
- Q3: Add 60s battery polling interval (was only fetched once at page load)
